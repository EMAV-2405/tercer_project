{% extends 'base.html' %}
{% block content %}

<div style="padding: 40px; max-width: 800px; margin: 0 auto;">

    <h2 style="color: #003478;">Tu Carrito de Compras</h2>

    <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <tr style="background: #003478; color: white;">
            <th style="padding: 10px;">Producto</th>
            <th>Precio</th>
            <th>Acción</th>
        </tr>

        {% for item in items %}
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px;">{{ item.nombre_producto }}</td>
            <td style="text-align: center;">${{ item.precio }}</td>

            <!-- BOTÓN ELIMINAR ACTUALIZADO -->
            <td style="text-align: center;">
                <a href="{% url 'eliminar_item' item.id %}" class="btn-custom btn-red btn-sm">
                    Eliminar
                </a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <div style="text-align: right; margin-top: 20px;">
        <h3>Total a Pagar: ${{ total }} MXN</h3>
    </div>

    {% if items %}
    <div style="background: white; padding: 20px; border: 1px solid #ddd; border-radius: 8px; margin-top: 20px;">

        <h3>Datos de Pago</h3>

        <form action="{% url 'procesar_compra' %}" method="POST">
            {% csrf_token %}

            <label>Método de Pago:</label>
            <select name="metodo_pago" style="padding: 10px; width: 100%; margin-bottom: 10px;">
                <option value="efectivo">Efectivo</option>
                <option value="tarjeta">Tarjeta de Crédito/Débito</option>
            </select>

            <input type="text" placeholder="Número de Tarjeta (Ficticio)"
                   style="width: 96%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc;">

            <input type="text" placeholder="CVV"
                   style="width: 20%; padding: 10px; border: 1px solid #ccc;">

            <!-- BOTÓN FINALIZAR COMPRA ACTUALIZADO -->
            <button type="submit" class="btn-custom btn-green btn-block" style="margin-top: 20px;">
                Finalizar Compra
            </button>

        </form>

    </div>

    {% else %}
        <p>Tu carrito está vacío.</p>
    {% endif %}

</div>

{% endblock %}
